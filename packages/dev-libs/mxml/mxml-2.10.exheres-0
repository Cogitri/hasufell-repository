# Copyright 2017 Julian Ospald
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.15 ] ]

SUMMARY="Mini-XML: A lightweight ANSI C XML library"
HOMEPAGE="http://www.msweet.org/projects.php?Z3"
DOWNLOADS="http://www.msweet.org/files/project3/${PNV}.tar.gz"

LICENCES="LGPL-2"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES="
    build:
        virtual/pkg-config
"

BUGS_TO="hasufell@posteo.de"

DEFAULT_SRC_PREPARE_PATCHES=(
    "${FILES}"/0001-Fix-ar-invocation.patch
)

src_install() {
    emake -j1 \
        INSTALL_BIN="\$(LIBTOOL) \$(INSTALL) -m 755" \
        STRIPPROG=touch \
        BUILDROOT="${IMAGE}" \
        docdir="/usr/share/doc/${PNVR}" \
        install
}

